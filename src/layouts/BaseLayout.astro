---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  ogImage?: string;
  article?: boolean;
  pubDate?: Date;
}

const {
  title,
  description = 'A blog about AI and developer world developments.',
  ogImage,
  article = false,
  pubDate,
} = Astro.props;

const siteUrl = 'https://blog.santoshchandu.com';
const canonicalURL = new URL(Astro.url.pathname, siteUrl);
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="generator" content={Astro.generator} />

  <!-- Primary Meta -->
  <title>{title}</title>
  <meta name="description" content={description} />
  <link rel="canonical" href={canonicalURL} />

  <!-- No tracking, no cookies, full privacy -->

  <!-- Open Graph -->
  <meta property="og:type" content={article ? 'article' : 'website'} />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  {ogImage && <meta property="og:image" content={`${siteUrl}${ogImage}`} />}
  {pubDate && <meta property="article:published_time" content={pubDate.toISOString()} />}

  <!-- RSS autodiscovery -->
  <link
    rel="alternate"
    type="application/rss+xml"
    title="Santosh Chandu Blog RSS Feed"
    href="/feed.xml"
  />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Fonts: loaded via CSS -->
</head>
<body>

  <!-- ── Header ──────────────────────────────────────────────── -->
  <header class="site-header">
    <div class="container header-inner">
      <div class="header-brand">
        <a href="/" class="logo" aria-label="Go to homepage">
          <span class="logo-mark">▲</span>
          <span class="logo-text">Santosh's<span class="logo-accent"> Blog</span></span>
        </a>
        <p class="tagline">AI AI & Dev — what's actually happening Dev — what's actually happening</p>
      </div>

      <nav class="header-nav" aria-label="Main navigation">
        <a href="/">Home</a>
        <a href="/archive">Archive</a>
        <a href="/about">About</a>
        <a href="/feed.xml" class="rss-link" aria-label="RSS Feed">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19.01 7.38 20 6.18 20C4.98 20 4 19.01 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/>
          </svg>
          RSS
        </a>
      </nav>
    </div>

    <!-- Decorative rule -->
    <div class="header-rule">
      <div class="container">
        <div class="rule-inner"></div>
      </div>
    </div>
  </header>

  <!-- ── Main ────────────────────────────────────────────────── -->
  <main id="main-content">
    <slot />
  </main>

  <!-- ── Footer ──────────────────────────────────────────────── -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <p>© {new Date().getFullYear()} Santosh Chandu</p>
        <p class="footer-note">No cookies. No trackers. No ads. Just words.</p>
      </div>
      <div class="footer-right">
        <a href="/feed.xml">RSS Feed</a>
        <a href="/about">About</a>
        <a href="mailto:hello@santoshchandu.com">Contact</a>
      </div>
    </div>
  </footer>

</body>
</html>

<style>
/* ─── Site Header ──────────────────────────────────────────── */
.site-header {
  background: var(--paper);
  position: sticky;
  top: 0;
  z-index: 100;
  border-bottom: 1px solid var(--border);
}

.header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 2rem;
  padding-top: 1rem;
  padding-bottom: 1rem;
}

.header-brand {
  display: flex;
  flex-direction: column;
  gap: 0.1rem;
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  color: var(--ink);
  font-family: var(--font-display);
  font-weight: 900;
  font-size: 1.25rem;
  letter-spacing: -0.02em;
  transition: none;
}

.logo:hover { color: var(--ink); }

.logo-mark {
  color: var(--accent);
  font-size: 0.9em;
  font-family: sans-serif;
}

.logo-accent {
  color: var(--accent);
}

.tagline {
  font-size: 0.72rem;
  color: var(--ink-faint);
  font-family: var(--font-body);
  font-weight: 300;
  font-style: italic;
  letter-spacing: 0.02em;
  margin: 0;
}

.header-nav {
  display: flex;
  align-items: center;
  gap: 1.75rem;
}

.header-nav a {
  font-family: var(--font-body);
  font-size: 0.88rem;
  font-weight: 400;
  letter-spacing: 0.04em;
  color: var(--ink-muted);
  text-decoration: none;
  text-transform: uppercase;
  transition: color 0.15s ease;
}

.header-nav a:hover { color: var(--accent); }

.rss-link {
  display: flex !important;
  align-items: center;
  gap: 0.35rem;
  color: var(--accent) !important;
  border: 1px solid var(--accent);
  padding: 0.2rem 0.65rem !important;
  border-radius: 2px;
  font-size: 0.8rem !important;
  transition: background 0.15s ease, color 0.15s ease !important;
}

.rss-link:hover {
  background: var(--accent) !important;
  color: white !important;
}

.header-rule { padding: 0; }
.rule-inner {
  height: 2px;
  background: linear-gradient(90deg, var(--accent) 0%, transparent 60%);
}

/* ─── Site Footer ──────────────────────────────────────────── */
.site-footer {
  margin-top: 6rem;
  padding: 2.5rem 0;
  border-top: 2px solid var(--ink);
  background: var(--paper-warm);
}

.footer-inner {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  gap: 2rem;
  flex-wrap: wrap;
}

.footer-left p {
  font-size: 0.85rem;
  color: var(--ink-muted);
  margin-bottom: 0.25rem;
}

.footer-note {
  font-style: italic;
  color: var(--ink-faint) !important;
  font-size: 0.78rem !important;
}

.footer-right {
  display: flex;
  gap: 1.5rem;
}

.footer-right a {
  font-size: 0.82rem;
  color: var(--ink-muted);
  text-decoration: none;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-family: var(--font-body);
}

.footer-right a:hover { color: var(--accent); }

/* ─── Responsive ───────────────────────────────────────────── */
@media (max-width: 640px) {
  .header-inner {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .header-nav {
    gap: 1.25rem;
  }

  .footer-inner {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style>
